# Консольный бот для игры в Морской бой — C++ Pet Project

## Описание

Консольное приложение-бот для классической игры **Морской бой** с возможностью игры в режимах **master** и **slave** через стандартные потоки ввода/вывода.  
Программа позволяет настраивать размер поля, количество кораблей и стратегию ведения боя.  

Игра полностью совместима с классическими правилами, кроме того, что размеры поля и количество кораблей могут быть произвольными.

---

## Правила игры

- Координаты начинаются с `(0,0)` в левом верхнем углу  
- Игра ведется между двумя игроками: **master** и **slave**  
  - Master задает параметры игры: размер поля, количество кораблей  
  - Slave получает параметры от master  
- Игроки расставляют корабли согласно установленным параметрам  
- Ходы выполняются поочередно  
- Размеры поля и количество кораблей фиксируются после старта игры  
- После каждого выстрела бот узнает результат до следующего хода  
- Стратегии стрельбы:
  - **Ordered** — последовательная стрельба по рядам, начиная с `(0,0)` (для тестов)  
  - **Custom** — ваш алгоритм (по умолчанию)  

---

## Команды

| Команда | Ответ | Описание |
|---------|-------|----------|
| ping | pong | тестовая команда |
| exit | ok | завершение работы программы |
| create [master,slave] | ok | создать игру в режиме master или slave |
| start | ok | старт игры |
| stop | ok | остановка текущей партии |
| set width N | ok/failed | установить ширину поля |
| get width | N | получить ширину поля |
| set height N | ok/failed | установить высоту поля |
| get height | N | получить высоту поля |
| set count [1,2,3,4] N | ok/failed | установить количество кораблей определенного типа |
| get count [1,2,3,4] | N | получить количество кораблей определенного типа |
| set strategy [ordered,custom] | ok | выбрать стратегию для игры |
| shot X Y | miss/hit/kill | результат выстрела по координатам |
| shot | X Y | координаты следующего выстрела бота |
| set result [miss,hit,kill] | ok | установить результат последнего выстрела программы |
| finished | yes/no | окончена ли текущая партия |
| win | yes/no | выиграл ли бот |
| lose | yes/no | проиграл ли бот |
| dump PATH | ok | сохранить текущее состояние игры в файл |
| load PATH | ok | загрузить состояние игры из файла |

---

## Формат файла для `dump` / `load`

Текстовый файл:

```

<ширина> <высота>
<размер корабля> <h/v> <X> <Y>
<размер корабля> <h/v> <X> <Y>

```

Пример:

```

10 10
1 v 0 0
2 h 3 4
4 h 1 8

```

- `h` — горизонтально  
- `v` — вертикально  

---

## Структура проекта

```

project/
├── main.cpp          # Основной файл приложения
├── game.h            # Заголовочный файл бизнес-логики игры
├── game.cpp          # Реализация игрового движка
├── strategy.h        # Заголовочный файл стратегий ведения боя
├── strategy.cpp      # Реализация стратегий
├── utils.h           # Вспомогательные функции
├── utils.cpp         # Реализация вспомогательных функций
├── CMakeLists.txt    # Конфигурация сборки

````

---

## Особенности реализации

- Поддержка ролей **master** и **slave**  
- Две стратегии стрельбы: Ordered и Custom  
- Проверка корректности параметров игры и размещения кораблей  
- Реализация через стандартные потоки ввода/вывода  
- Возможность загрузки/сохранения состояния игры через файлы  
- Обработка ошибок и некорректных команд  

---

## Требования

- **C++17** или новее  
- Стандартная библиотека C++  
- Опционально: Google Test для написания тестов  

---

## Сборка и запуск

```bash
# Клонируем репозиторий
git clone <repository-url>
cd <project-directory>

# Создаем папку для сборки
mkdir build
cd build

# Конфигурация и сборка
cmake ..
make
````

Запуск приложения:

```bash
./battleship_bot
```

---

## Игра с ботом

1. Создать игру:

```text
create master
# или
create slave
```

2. Установить размеры поля и количество кораблей (для master):

```text
set width 10
set height 10
set count 1 4
set count 2 3
```

3. Расставить корабли, стартовать игру:

```text
start
```

4. Ведите игру, получая и отправляя команды `shot` и `set result`

5. Завершение игры:

```text
stop
exit
```

---

## Идеи для развития

* Реализация более сложных стратегий Custom
* Сетевая игра между двумя ботами
* Графический интерфейс для наглядного отображения поля
* Автоматическое тестирование стратегий на множестве партий

---

Проект создан в учебных целях.

---
